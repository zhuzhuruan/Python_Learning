# -*- coding:utf-8 -*-
"""
-------------------------------------------------深浅拷贝-------------------------------------------------
一、数据存放机制
1、存放机制
(1)在内存中，分为栈区、堆区两个部分，其中栈区用来存放变量名和变量名对应的变量值的内存地址；堆区用来存放变量值
(2)进行赋值操作（变量名 = 变量值）时，都会在内存中开辟新空间来存放变量名和变量值

2、不可变数据类型：字符串、整型、浮点型
    -- 例如：x = 'aaa' ; y = 'bbb'

           ===栈区===                       ===堆区===

        x -> 0xffff0030  -----------------→    aaa
        y -> 0xffff0031  -----------------→    bbb

    针对不可变数据类型，当进行z = x（变量名 = 变量名）的操作时，就是把变量名x对应的内存地址复制一份给z,两者指向同一个内存地址，id相同
           ===栈区===                       ===堆区===

        x -> 0xffff0030  -----------------→    aaa ←----- ↑
        y -> 0xffff0031  -----------------→    bbb        ↑
        z -> 0xffff0030  ---------------------------------↑

    当x重新赋值（x = 'ccc'）时，其实是变量名x解除原本与变量值aaa的对应关系，重新指向变量值ccc,栈区保存的也是变量值ccc的内存地址

                                               aaa ←----- ↑
        y -> 0xffff0031  -----------------→    bbb        ↑
        z -> 0xffff0030  ---------------------------------↑
        x -> 0xffff0032  -----------------→    ccc

2、可变数据类型：列表、字典
    -- 例如：list1 = ['aaa', 'bbb', 'ccc']

       ======栈区======                   ==================堆区==================

                                            0 -> 0xffff0030 -----------→ aaa
       list1 -> 0xffff1100 -------------→   1 -> 0xffff0031 -----------→ bbb
                                            0 -> 0xffff0032 -----------→ ccc


二、浅拷贝
1、概念：浅拷贝只是增加了一个指针指向原来的内存地址
    -- 例如：list1 = ['aaa', 'bbb', 'ccc', ['ddd', 'eee', 'fff']] ; list2 = list1.copy()

       ======栈区======                   ====================================堆区====================================

                                            0 -> 0xffff0030 ---------------------------------------→ aaa ←--- ↑
                                            1 -> 0xffff0031 ---------------------------------------→ bbb ←----↑---↑
       list1 -> 0xffff1100 -------------→   2 -> 0xffff0032 ---------------------------------------→ ccc ←----↑---↑--↑
                                                                     0 -> 0xffff2230 --------------→ ddd      ↑   ↑  ↑
                                            3 -> 0xffff0033 -------→ 1 -> 0xffff2231 --------------→ eee      ↑   ↑  ↑
                                                                     2 -> 0xffff2232 --------------→ fff      ↑   ↑  ↑
                                                                              ↑                               ↑   ↑  ↑
                                                                              ↑                               ↑   ↑  ↑
                                            0 -> 0xffff0030 ------------------↑-------------------------------↑   ↑  ↑
       list2 -> 0xffff1101 -------------→   1 -> 0xffff0031 ------------------↑-----------------------------------↑  ↑
                                            2 -> 0xffff0032 ------------------↑--------------------------------------↑
                                            3 -> 0xffff0033 ------------------↑


    -- 浅拷贝是把原列表第一层的内存地址不加区分的拷贝给新列表，这样针对不可变数据类型是没有问题的，但是针对可变数据类型，就无法完全分割开来。
        list1 = ['aaa', 'bbb', 'ccc', ['ddd', 'eee']]
        list2 = list1.copy()
        list1[0] = 'aah'
        list1[3][0] = 'dddd'
        print(list1)
        print(list2)


二、深拷贝
1、概念：实现可以区分开可变类型和不可变类型的拷贝机制
    -- 例如：list1 = ['aaa', 'bbb', 'ccc', ['ddd', 'eee', 'fff']] ; list3 = list1.copy()

       ======栈区======                   ====================================堆区====================================

                                            0 -> 0xffff0030 ---------------------------------------→ aaa ←--- ↑
                                            1 -> 0xffff0031 ---------------------------------------→ bbb ←----↑---↑
       list1 -> 0xffff1100 -------------→   2 -> 0xffff0032 ---------------------------------------→ ccc ←----↑---↑--↑
                                                                                                              ↑   ↑  ↑
                                                                     0 -> 0xffff2230 --------------→ ddd ←----↑---↑--↑----↑
                                            3 -> 0xffff0033 -------→ 1 -> 0xffff2231 --------------→ eee ←----↑---↑--↑----↑----↑
                                                                     2 -> 0xffff2232 --------------→ fff ←----↑---↑--↑----↑----↑---↑
                                                                                                              ↑   ↑  ↑    ↑    ↑   ↑
                                                                                                              ↑   ↑  ↑    ↑    ↑   ↑
                                            0 -> 0xffff0030 --------------------------------------------------↑   ↑  ↑    ↑    ↑   ↑
       list3 -> 0xffff1101 -------------→   1 -> 0xffff0031 ------------------------------------------------------↑  ↑    ↑    ↑   ↑
                                            2 -> 0xffff0032 ---------------------------------------------------------↑    ↑    ↑   ↑
                                                                                                                          ↑    ↑   ↑
                                                                     0 -> 0xffff2230 -------------------------------------↑    ↑   ↑
                                            3 -> 0xffff0044 -------→ 1 -> 0xffff2231 ------------------------------------------↑   ↑
                                                                     2 -> 0xffff2232 ----------------------------------------------↑


        import copy
        list1 = ['aaa', 'bbb', 'ccc', ['ddd', 'eee']]
        list3 = copy.deepcopy(list1)
        list1[0] = 'aah'
        list1[3][0] = 'dddd'
        print(list1)
        print(list3)

"""


